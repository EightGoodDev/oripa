(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32036,e=>{"use strict";function t(e){return e.toLocaleString("ja-JP")}function a(e){return`\xa5${e.toLocaleString("ja-JP")}`}function r(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}function s(e){return("string"==typeof e?new Date(e):e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function l(e){let t="string"==typeof e?new Date(e):e,a=Math.floor((new Date().getTime()-t.getTime())/1e3),s=Math.floor(a/60),l=Math.floor(s/60),n=Math.floor(l/24);return a<60?"たった今":s<60?`${s}分前`:l<24?`${l}時間前`:n<7?`${n}日前`:r(t)}e.s(["formatCoins",()=>t,"formatDate",()=>r,"formatDateTime",()=>s,"formatPrice",()=>a,"formatRelativeTime",()=>l])},90396,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(49838),s=e.i(59544);function l({columns:e,data:l,pageSize:n=20,onRowClick:i,keyField:o="id"}){let[c,d]=(0,a.useState)(0),[u,x]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),f=u?[...l].sort((e,t)=>{let a=e[u],r=t[u];if(null==a||null==r)return 0;let s=a<r?-1:+(a>r);return h?s:-s}):l,g=Math.max(1,Math.ceil(f.length/n)),y=f.slice(c*n,(c+1)*n);return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{className:"border-b border-gray-800 text-left",children:e.map(e=>(0,t.jsxs)("th",{className:(0,r.cn)("px-4 py-3 text-gray-400 font-medium",e.sortable&&"cursor-pointer select-none hover:text-white",e.className),onClick:e.sortable?()=>{var t;u===(t=e.key)?m(!h):(x(t),m(!0)),d(0)}:void 0,children:[e.label,e.sortable&&u===e.key&&(0,t.jsx)("span",{className:"ml-1",children:h?"↑":"↓"})]},e.key))})}),(0,t.jsx)("tbody",{children:0===y.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:e.length,className:"px-4 py-8 text-center text-gray-500",children:"データがありません"})}):y.map(a=>(0,t.jsx)("tr",{className:(0,r.cn)("border-b border-gray-800/50 hover:bg-gray-900/50 transition-colors",i&&"cursor-pointer"),onClick:i?()=>i(a):void 0,children:e.map(e=>(0,t.jsx)("td",{className:(0,r.cn)("px-4 py-3",e.className),children:e.render?e.render(a):String(a[e.key]??"")},e.key))},String(a[o])))})]})}),g>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[l.length,"件中 ",c*n+1,"-",Math.min((c+1)*n,l.length),"件"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.default,{variant:"ghost",size:"sm",disabled:0===c,onClick:()=>d(c-1),children:"前へ"}),(0,t.jsx)(s.default,{variant:"ghost",size:"sm",disabled:c>=g-1,onClick:()=>d(c+1),children:"次へ"})]})]})]})}e.s(["default",()=>l])},9545,e=>{"use strict";e.s(["RANK_COLORS",0,{BEGINNER:"#9ca3af",BRONZE:"#cd7f32",SILVER:"#c0c0c0",GOLD:"#ffd700",PLATINUM:"#e5e4e2",DIAMOND:"#b9f2ff",VIP:"#ff6b6b"},"RANK_LABELS",0,{BEGINNER:"ビギナー",BRONZE:"ブロンズ",SILVER:"シルバー",GOLD:"ゴールド",PLATINUM:"プラチナ",DIAMOND:"ダイヤモンド",VIP:"VIP"}])},99274,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(90396),l=e.i(59544),n=e.i(32036),i=e.i(9545);let o=["USER","ADMIN","SUPER_ADMIN"],c=["BEGINNER","BRONZE","SILVER","GOLD","PLATINUM","DIAMOND","VIP"],d="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid";function u(){let e=(0,r.useRouter)(),[u,x]=(0,a.useState)([]),[h,m]=(0,a.useState)(!0),[f,g]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),[b,p]=(0,a.useState)("");async function j(){m(!0);let e=new URLSearchParams;f&&e.set("search",f),y&&e.set("role",y),b&&e.set("rank",b);let t=await fetch(`/api/admin/users?${e.toString()}`);t.ok&&x(await t.json()),m(!1)}function v(){j()}(0,a.useEffect)(()=>{j()},[]);let S=[{key:"name",label:"名前",render:e=>(0,t.jsx)("span",{className:e.isActive?"":"text-gray-500 line-through",children:e.name||"—"})},{key:"email",label:"メール",render:e=>(0,t.jsx)("span",{className:"text-gray-400",children:e.email||"—"})},{key:"rank",label:"ランク",sortable:!0,render:e=>(0,t.jsx)("span",{className:"text-xs font-bold px-2 py-0.5 rounded",style:{color:i.RANK_COLORS[e.rank],backgroundColor:`${i.RANK_COLORS[e.rank]}20`},children:i.RANK_LABELS[e.rank]})},{key:"role",label:"ロール",sortable:!0,render:e=>(0,t.jsx)("span",{className:"SUPER_ADMIN"===e.role?"text-red-400 text-xs font-bold":"ADMIN"===e.role?"text-yellow-400 text-xs font-bold":"text-gray-400 text-xs",children:e.role})},{key:"coins",label:"コイン残高",sortable:!0,render:e=>(0,n.formatCoins)(e.coins)},{key:"_count",label:"ガチャ回数",render:e=>(0,n.formatCoins)(e._count.draws)},{key:"createdAt",label:"登録日",sortable:!0,render:e=>(0,n.formatDate)(e.createdAt)}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"ユーザー管理"})}),(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"名前・メールで検索...",value:f,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&v(),className:d}),(0,t.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:d,children:[(0,t.jsx)("option",{value:"",children:"全ロール"}),o.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:b,onChange:e=>p(e.target.value),className:d,children:[(0,t.jsx)("option",{value:"",children:"全ランク"}),c.map(e=>(0,t.jsx)("option",{value:e,children:i.RANK_LABELS[e]},e))]}),(0,t.jsx)(l.default,{variant:"outline",size:"sm",onClick:v,children:"検索"})]}),(0,t.jsx)("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden",children:h?(0,t.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:"読み込み中..."}):(0,t.jsx)(s.default,{columns:S,data:u,onRowClick:t=>e.push(`/admin/users/${t.id}`)})})]})}e.s(["default",()=>u])}]);