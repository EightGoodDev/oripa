(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89271,e=>{"use strict";e.s(["CATEGORY_LABELS",0,{all:"すべて",sneaker:"スニーカー",card:"トレカ",figure:"フィギュア",game:"ゲーム",other:"その他"},"RARITY_CONFIG",0,{N:{label:"N",color:"#9ca3af",bg:"#374151",glow:""},R:{label:"R",color:"#60a5fa",bg:"#1e3a5f",glow:""},SR:{label:"SR",color:"#a78bfa",bg:"#3b1f7a",glow:"0 0 20px rgba(167,139,250,0.5)"},SSR:{label:"SSR",color:"#fbbf24",bg:"#78350f",glow:"0 0 30px rgba(251,191,36,0.6)"},UR:{label:"UR",color:"#f472b6",bg:"#831843",glow:"0 0 40px rgba(244,114,182,0.7)"}}])},96640,e=>{"use strict";var r=e.i(43476),a=e.i(89271);function t({rarity:e}){let t=a.RARITY_CONFIG[e];return(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold",style:{color:t.color,backgroundColor:t.bg},children:t.label})}e.s(["default",()=>t])},43504,e=>{"use strict";var r=e.i(43476),a=e.i(49838);function t({label:e,error:t,children:l,className:s}){return(0,r.jsxs)("div",{className:(0,a.cn)("space-y-1",s),children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:e}),l,t&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:t})]})}e.s(["default",()=>t])},86686,e=>{"use strict";var r=e.i(43476),a=e.i(32098),t=e.i(59544);function l({isOpen:e,onClose:l,onConfirm:s,title:i,message:o,confirmLabel:n="削除",loading:d=!1}){return(0,r.jsx)(a.default,{isOpen:e,onClose:l,children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:i}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:o}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(t.default,{variant:"ghost",size:"sm",onClick:l,children:"キャンセル"}),(0,r.jsx)(t.default,{variant:"danger",size:"sm",onClick:s,disabled:d,children:d?"処理中...":n})]})]})})}e.s(["default",()=>l])},91828,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(53145),s=e.i(94814),i=e.i(81307),o=e.i(43504),n=e.i(59544),d=e.i(96640),c=e.i(86686);let u=i.z.object({name:i.z.string().min(1,"名前を入力してください"),description:i.z.string().optional().default(""),image:i.z.string().url("有効なURLを入力してください"),rarity:i.z.enum(["N","R","SR","SSR","UR"]),marketPrice:i.z.coerce.number().int().min(0),coinValue:i.z.coerce.number().int().min(0)});function m({params:e}){let{id:i}=(0,a.use)(e),m=(0,t.useRouter)(),[x,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!0),[h,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[N,v]=(0,a.useState)(!1),[R,w]=(0,a.useState)(""),{register:S,handleSubmit:z,watch:k,reset:C,formState:{errors:P}}=(0,l.useForm)({resolver:(0,s.zodResolver)(u),defaultValues:{name:"",description:"",image:"",rarity:"N",marketPrice:0,coinValue:0}}),T=k("image");(0,a.useEffect)(()=>{!async function(){try{let e=await fetch(`/api/admin/prizes/${i}`);if(!e.ok)return void m.push("/admin/prizes");let r=await e.json();g(r),C({name:r.name,description:r.description,image:r.image,rarity:r.rarity,marketPrice:r.marketPrice,coinValue:r.coinValue})}catch{m.push("/admin/prizes")}finally{b(!1)}}()},[i,C,m]);let U=async e=>{f(!0),w("");try{let r=await fetch(`/api/admin/prizes/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();w(e.error||"更新に失敗しました");return}let a=await r.json();g(e=>e?{...e,...a}:e),w("")}catch{w("更新に失敗しました")}finally{f(!1)}},O=async()=>{j(!0);try{let e=await fetch(`/api/admin/prizes/${i}`,{method:"DELETE"});if(!e.ok){let r=await e.json();w(r.error||"削除に失敗しました"),v(!1);return}m.push("/admin/prizes")}catch{w("削除に失敗しました"),v(!1)}finally{j(!1)}};return p?(0,r.jsx)("div",{className:"text-center text-gray-500 py-12",children:"読み込み中..."}):x?(0,r.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"景品を編集"}),(0,r.jsx)(d.default,{rarity:x.rarity})]}),R&&(0,r.jsx)("div",{className:"bg-red-900/50 border border-red-700 rounded-lg px-4 py-3 text-sm text-red-300",children:R}),(0,r.jsxs)("form",{onSubmit:z(U),className:"space-y-5",children:[(0,r.jsx)(o.default,{label:"名前",error:P.name?.message,children:(0,r.jsx)("input",{type:"text",...S("name"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"景品名を入力"})}),(0,r.jsx)(o.default,{label:"説明",error:P.description?.message,children:(0,r.jsx)("textarea",{...S("description"),rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid resize-none",placeholder:"景品の説明（任意）"})}),(0,r.jsxs)(o.default,{label:"画像URL",error:P.image?.message,children:[(0,r.jsx)("input",{type:"text",...S("image"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"https://..."}),T&&/^https?:\/\/.+/.test(T)&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:T,alt:"プレビュー",className:"w-32 h-32 object-cover rounded-lg border border-gray-700",onError:e=>{e.target.style.display="none"}})})]}),(0,r.jsx)(o.default,{label:"レアリティ",error:P.rarity?.message,children:(0,r.jsxs)("select",{...S("rarity"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",children:[(0,r.jsx)("option",{value:"N",children:"N"}),(0,r.jsx)("option",{value:"R",children:"R"}),(0,r.jsx)("option",{value:"SR",children:"SR"}),(0,r.jsx)("option",{value:"SSR",children:"SSR"}),(0,r.jsx)("option",{value:"UR",children:"UR"})]})}),(0,r.jsx)(o.default,{label:"市場価格（円）",error:P.marketPrice?.message,children:(0,r.jsx)("input",{type:"number",...S("marketPrice"),min:0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"0"})}),(0,r.jsx)(o.default,{label:"コイン価値",error:P.coinValue?.message,children:(0,r.jsx)("input",{type:"number",...S("coinValue"),min:0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"0"})}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)(n.default,{type:"submit",size:"sm",disabled:h,children:h?"更新中...":"更新"}),(0,r.jsx)(n.default,{type:"button",variant:"ghost",size:"sm",onClick:()=>m.push("/admin/prizes"),children:"一覧に戻る"})]})]}),x.packPrizes.length>0&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h2",{className:"text-lg font-bold",children:"使用中のパック"}),(0,r.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-800",children:x.packPrizes.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{type:"button",className:"w-full px-4 py-3 text-left text-sm text-gray-300 hover:bg-gray-800 transition-colors",onClick:()=>m.push(`/admin/packs/${e.pack.id}`),children:e.pack.title})},e.id))})})]}),0===x._count.packPrizes&&(0,r.jsx)("div",{className:"border-t border-gray-800 pt-6",children:(0,r.jsx)(n.default,{variant:"danger",size:"sm",onClick:()=>v(!0),children:"この景品を削除"})}),(0,r.jsx)(c.default,{isOpen:N,onClose:()=>v(!1),onConfirm:O,title:"景品を削除",message:`「${x.name}」を削除しますか？この操作は取り消せません。`,confirmLabel:"削除",loading:y})]}):null}e.s(["default",()=>m])}]);