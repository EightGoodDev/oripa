(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32036,e=>{"use strict";function r(e){return e.toLocaleString("ja-JP")}function s(e){return`\xa5${e.toLocaleString("ja-JP")}`}function t(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}function l(e){return("string"==typeof e?new Date(e):e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function a(e){let r="string"==typeof e?new Date(e):e,s=Math.floor((new Date().getTime()-r.getTime())/1e3),l=Math.floor(s/60),a=Math.floor(l/60),i=Math.floor(a/24);return s<60?"たった今":l<60?`${l}分前`:a<24?`${a}時間前`:i<7?`${i}日前`:t(r)}e.s(["formatCoins",()=>r,"formatDate",()=>t,"formatDateTime",()=>l,"formatPrice",()=>s,"formatRelativeTime",()=>a])},43504,e=>{"use strict";var r=e.i(43476),s=e.i(49838);function t({label:e,error:t,children:l,className:a}){return(0,r.jsxs)("div",{className:(0,s.cn)("space-y-1",a),children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:e}),l,t&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:t})]})}e.s(["default",()=>t])},86686,e=>{"use strict";var r=e.i(43476),s=e.i(32098),t=e.i(59544);function l({isOpen:e,onClose:l,onConfirm:a,title:i,message:n,confirmLabel:o="削除",loading:d=!1}){return(0,r.jsx)(s.default,{isOpen:e,onClose:l,children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:i}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:n}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(t.default,{variant:"ghost",size:"sm",onClick:l,children:"キャンセル"}),(0,r.jsx)(t.default,{variant:"danger",size:"sm",onClick:a,disabled:d,children:d?"処理中...":o})]})]})})}e.s(["default",()=>l])},90396,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(49838),l=e.i(59544);function a({columns:e,data:a,pageSize:i=20,onRowClick:n,keyField:o="id"}){let[d,c]=(0,s.useState)(0),[u,m]=(0,s.useState)(null),[x,f]=(0,s.useState)(!0),g=u?[...a].sort((e,r)=>{let s=e[u],t=r[u];if(null==s||null==t)return 0;let l=s<t?-1:+(s>t);return x?l:-l}):a,b=Math.max(1,Math.ceil(g.length/i)),p=g.slice(d*i,(d+1)*i);return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"border-b border-gray-800 text-left",children:e.map(e=>(0,r.jsxs)("th",{className:(0,t.cn)("px-4 py-3 text-gray-400 font-medium",e.sortable&&"cursor-pointer select-none hover:text-white",e.className),onClick:e.sortable?()=>{var r;u===(r=e.key)?f(!x):(m(r),f(!0)),c(0)}:void 0,children:[e.label,e.sortable&&u===e.key&&(0,r.jsx)("span",{className:"ml-1",children:x?"↑":"↓"})]},e.key))})}),(0,r.jsx)("tbody",{children:0===p.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:e.length,className:"px-4 py-8 text-center text-gray-500",children:"データがありません"})}):p.map(s=>(0,r.jsx)("tr",{className:(0,t.cn)("border-b border-gray-800/50 hover:bg-gray-900/50 transition-colors",n&&"cursor-pointer"),onClick:n?()=>n(s):void 0,children:e.map(e=>(0,r.jsx)("td",{className:(0,t.cn)("px-4 py-3",e.className),children:e.render?e.render(s):String(s[e.key]??"")},e.key))},String(s[o])))})]})}),b>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[a.length,"件中 ",d*i+1,"-",Math.min((d+1)*i,a.length),"件"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.default,{variant:"ghost",size:"sm",disabled:0===d,onClick:()=>c(d-1),children:"前へ"}),(0,r.jsx)(l.default,{variant:"ghost",size:"sm",disabled:d>=b-1,onClick:()=>c(d+1),children:"次へ"})]})]})]})}e.s(["default",()=>a])},2439,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(53145),l=e.i(94814),a=e.i(81307),i=e.i(90396),n=e.i(43504),o=e.i(86686),d=e.i(32098),c=e.i(59544),u=e.i(32036);let m=a.z.object({coins:a.z.coerce.number().int().min(1,"1以上を入力"),price:a.z.coerce.number().int().min(1,"1以上を入力"),bonus:a.z.coerce.number().int().min(0).default(0),isPopular:a.z.boolean().default(!1),firstTimeOnly:a.z.boolean().default(!1),isActive:a.z.boolean().default(!0),sortOrder:a.z.coerce.number().int().default(0)});function x(){let[e,a]=(0,s.useState)([]),[x,f]=(0,s.useState)(!0),[g,b]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null),[h,j]=(0,s.useState)(null),[N,v]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),{register:O,handleSubmit:S,reset:C,formState:{errors:P}}=(0,t.useForm)({resolver:(0,l.zodResolver)(m),defaultValues:{coins:0,price:0,bonus:0,isPopular:!1,firstTimeOnly:!1,isActive:!0,sortOrder:0}}),T=(0,s.useCallback)(async()=>{f(!0);try{let e=await fetch("/api/admin/plans");if(e.ok){let r=await e.json();a(r)}}finally{f(!1)}},[]);function z(){b(!1),y(null)}async function A(e){w(!0);try{let r=p?`/api/admin/plans/${p.id}`:"/api/admin/plans",s=p?"PUT":"POST";(await fetch(r,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(z(),await T())}finally{w(!1)}}async function D(){if(h){v(!0);try{(await fetch(`/api/admin/plans/${h.id}`,{method:"DELETE"})).ok&&(j(null),await T())}finally{v(!1)}}}(0,s.useEffect)(()=>{T()},[T]);let M=[{key:"coins",label:"コイン数",sortable:!0,render:e=>(0,u.formatCoins)(e.coins)},{key:"price",label:"価格",sortable:!0,render:e=>(0,u.formatPrice)(e.price)},{key:"bonus",label:"ボーナス",render:e=>e.bonus>0?(0,r.jsxs)("span",{className:"text-gold-mid",children:["+",(0,u.formatCoins)(e.bonus)]}):(0,r.jsx)("span",{className:"text-gray-500",children:"—"})},{key:"isPopular",label:"人気",render:e=>e.isPopular?(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-900/50 text-green-400 border border-green-800",children:"人気"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-500 border border-gray-700",children:"—"})},{key:"firstTimeOnly",label:"初回限定",render:e=>e.firstTimeOnly?(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-900/50 text-yellow-400 border border-yellow-800",children:"初回限定"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-500 border border-gray-700",children:"—"})},{key:"isActive",label:"有効",render:e=>e.isActive?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"有効"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs text-gray-500",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"無効"]})},{key:"sortOrder",label:"表示順",sortable:!0},{key:"actions",label:"操作",render:e=>(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.default,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),y(e),C({coins:e.coins,price:e.price,bonus:e.bonus,isPopular:e.isPopular,firstTimeOnly:e.firstTimeOnly,isActive:e.isActive,sortOrder:e.sortOrder}),b(!0)},children:"編集"}),(0,r.jsx)(c.default,{variant:"danger",size:"sm",onClick:r=>{r.stopPropagation(),j(e)},children:"削除"})]})}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"チャージプラン管理"}),(0,r.jsx)(c.default,{variant:"gold",size:"sm",onClick:function(){y(null),C({coins:0,price:0,bonus:0,isPopular:!1,firstTimeOnly:!1,isActive:!0,sortOrder:0}),b(!0)},children:"新規追加"})]}),(0,r.jsx)("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden",children:x?(0,r.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:"読み込み中..."}):(0,r.jsx)(i.default,{columns:M,data:e})}),(0,r.jsx)(d.default,{isOpen:g,onClose:z,className:"max-w-md",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:p?"プラン編集":"新規プラン作成"}),(0,r.jsxs)("form",{onSubmit:S(A),className:"space-y-4",children:[(0,r.jsx)(n.default,{label:"コイン数",error:P.coins?.message,children:(0,r.jsx)("input",{type:"number",...O("coins"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,r.jsx)(n.default,{label:"価格 (円)",error:P.price?.message,children:(0,r.jsx)("input",{type:"number",...O("price"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,r.jsx)(n.default,{label:"ボーナスコイン",error:P.bonus?.message,children:(0,r.jsx)("input",{type:"number",...O("bonus"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,r.jsx)(n.default,{label:"表示順",error:P.sortOrder?.message,children:(0,r.jsx)("input",{type:"number",...O("sortOrder"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,r.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,r.jsx)("input",{type:"checkbox",...O("isPopular"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"人気プランとして表示"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,r.jsx)("input",{type:"checkbox",...O("firstTimeOnly"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"初回限定プラン"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,r.jsx)("input",{type:"checkbox",...O("isActive"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"有効"]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,r.jsx)(c.default,{type:"button",variant:"ghost",size:"sm",onClick:z,children:"キャンセル"}),(0,r.jsx)(c.default,{type:"submit",variant:"gold",size:"sm",disabled:k,children:k?"保存中...":p?"更新":"作成"})]})]})]})}),(0,r.jsx)(o.default,{isOpen:!!h,onClose:()=>j(null),onConfirm:D,title:"プランを削除",message:"このチャージプランを削除しますか？注文履歴がある場合は無効化されます。",confirmLabel:"削除",loading:N})]})}e.s(["default",()=>x])}]);