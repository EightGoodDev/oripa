module.exports=[35785,a=>{"use strict";a.s(["CATEGORY_LABELS",0,{all:"すべて",sneaker:"スニーカー",card:"トレカ",figure:"フィギュア",game:"ゲーム",other:"その他"},"RARITY_CONFIG",0,{N:{label:"N",color:"#9ca3af",bg:"#374151",glow:""},R:{label:"R",color:"#60a5fa",bg:"#1e3a5f",glow:""},SR:{label:"SR",color:"#a78bfa",bg:"#3b1f7a",glow:"0 0 20px rgba(167,139,250,0.5)"},SSR:{label:"SSR",color:"#fbbf24",bg:"#78350f",glow:"0 0 30px rgba(251,191,36,0.6)"},UR:{label:"UR",color:"#f472b6",bg:"#831843",glow:"0 0 40px rgba(244,114,182,0.7)"}}])},55486,a=>{"use strict";var b=a.i(87924),c=a.i(35785);function d({rarity:a}){let d=c.RARITY_CONFIG[a];return(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold",style:{color:d.color,backgroundColor:d.bg},children:d.label})}a.s(["default",()=>d])},51973,a=>{"use strict";var b=a.i(87924),c=a.i(18239);function d({label:a,error:d,children:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("space-y-1",f),children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:a}),e,d&&(0,b.jsx)("p",{className:"text-xs text-red-400",children:d})]})}a.s(["default",()=>d])},14303,a=>{"use strict";var b=a.i(87924),c=a.i(48313),d=a.i(96438);function e({isOpen:a,onClose:e,onConfirm:f,title:g,message:h,confirmLabel:i="削除",loading:j=!1}){return(0,b.jsx)(c.default,{isOpen:a,onClose:e,children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-2",children:g}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:h}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(d.default,{variant:"ghost",size:"sm",onClick:e,children:"キャンセル"}),(0,b.jsx)(d.default,{variant:"danger",size:"sm",onClick:f,disabled:j,children:j?"処理中...":i})]})]})})}a.s(["default",()=>e])},21627,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95245),f=a.i(59501),g=a.i(56757),h=a.i(51973),i=a.i(96438),j=a.i(55486),k=a.i(14303);let l=g.z.object({name:g.z.string().min(1,"名前を入力してください"),description:g.z.string().optional().default(""),image:g.z.string().url("有効なURLを入力してください"),rarity:g.z.enum(["N","R","SR","SSR","UR"]),marketPrice:g.z.coerce.number().int().min(0),coinValue:g.z.coerce.number().int().min(0)});function m({params:a}){let{id:g}=(0,c.use)(a),m=(0,d.useRouter)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),{register:z,handleSubmit:A,watch:B,reset:C,formState:{errors:D}}=(0,e.useForm)({resolver:(0,f.zodResolver)(l),defaultValues:{name:"",description:"",image:"",rarity:"N",marketPrice:0,coinValue:0}}),E=B("image");(0,c.useEffect)(()=>{!async function(){try{let a=await fetch(`/api/admin/prizes/${g}`);if(!a.ok)return void m.push("/admin/prizes");let b=await a.json();o(b),C({name:b.name,description:b.description,image:b.image,rarity:b.rarity,marketPrice:b.marketPrice,coinValue:b.coinValue})}catch{m.push("/admin/prizes")}finally{q(!1)}}()},[g,C,m]);let F=async a=>{s(!0),y("");try{let b=await fetch(`/api/admin/prizes/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok){let a=await b.json();y(a.error||"更新に失敗しました");return}let c=await b.json();o(a=>a?{...a,...c}:a),y("")}catch{y("更新に失敗しました")}finally{s(!1)}},G=async()=>{u(!0);try{let a=await fetch(`/api/admin/prizes/${g}`,{method:"DELETE"});if(!a.ok){let b=await a.json();y(b.error||"削除に失敗しました"),w(!1);return}m.push("/admin/prizes")}catch{y("削除に失敗しました"),w(!1)}finally{u(!1)}};return p?(0,b.jsx)("div",{className:"text-center text-gray-500 py-12",children:"読み込み中..."}):n?(0,b.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"景品を編集"}),(0,b.jsx)(j.default,{rarity:n.rarity})]}),x&&(0,b.jsx)("div",{className:"bg-red-900/50 border border-red-700 rounded-lg px-4 py-3 text-sm text-red-300",children:x}),(0,b.jsxs)("form",{onSubmit:A(F),className:"space-y-5",children:[(0,b.jsx)(h.default,{label:"名前",error:D.name?.message,children:(0,b.jsx)("input",{type:"text",...z("name"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"景品名を入力"})}),(0,b.jsx)(h.default,{label:"説明",error:D.description?.message,children:(0,b.jsx)("textarea",{...z("description"),rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid resize-none",placeholder:"景品の説明（任意）"})}),(0,b.jsxs)(h.default,{label:"画像URL",error:D.image?.message,children:[(0,b.jsx)("input",{type:"text",...z("image"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"https://..."}),E&&/^https?:\/\/.+/.test(E)&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("img",{src:E,alt:"プレビュー",className:"w-32 h-32 object-cover rounded-lg border border-gray-700",onError:a=>{a.target.style.display="none"}})})]}),(0,b.jsx)(h.default,{label:"レアリティ",error:D.rarity?.message,children:(0,b.jsxs)("select",{...z("rarity"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",children:[(0,b.jsx)("option",{value:"N",children:"N"}),(0,b.jsx)("option",{value:"R",children:"R"}),(0,b.jsx)("option",{value:"SR",children:"SR"}),(0,b.jsx)("option",{value:"SSR",children:"SSR"}),(0,b.jsx)("option",{value:"UR",children:"UR"})]})}),(0,b.jsx)(h.default,{label:"市場価格（円）",error:D.marketPrice?.message,children:(0,b.jsx)("input",{type:"number",...z("marketPrice"),min:0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"0"})}),(0,b.jsx)(h.default,{label:"コイン価値",error:D.coinValue?.message,children:(0,b.jsx)("input",{type:"number",...z("coinValue"),min:0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid",placeholder:"0"})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(i.default,{type:"submit",size:"sm",disabled:r,children:r?"更新中...":"更新"}),(0,b.jsx)(i.default,{type:"button",variant:"ghost",size:"sm",onClick:()=>m.push("/admin/prizes"),children:"一覧に戻る"})]})]}),n.packPrizes.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"使用中のパック"}),(0,b.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl overflow-hidden",children:(0,b.jsx)("ul",{className:"divide-y divide-gray-800",children:n.packPrizes.map(a=>(0,b.jsx)("li",{children:(0,b.jsx)("button",{type:"button",className:"w-full px-4 py-3 text-left text-sm text-gray-300 hover:bg-gray-800 transition-colors",onClick:()=>m.push(`/admin/packs/${a.pack.id}`),children:a.pack.title})},a.id))})})]}),0===n._count.packPrizes&&(0,b.jsx)("div",{className:"border-t border-gray-800 pt-6",children:(0,b.jsx)(i.default,{variant:"danger",size:"sm",onClick:()=>w(!0),children:"この景品を削除"})}),(0,b.jsx)(k.default,{isOpen:v,onClose:()=>w(!1),onConfirm:G,title:"景品を削除",message:`「${n.name}」を削除しますか？この操作は取り消せません。`,confirmLabel:"削除",loading:t})]}):null}a.s(["default",()=>m])}];

//# sourceMappingURL=src_de845c48._.js.map