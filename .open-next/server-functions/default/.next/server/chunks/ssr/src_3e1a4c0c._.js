module.exports=[74285,a=>{"use strict";function b(a){return a.toLocaleString("ja-JP")}function c(a){return`\xa5${a.toLocaleString("ja-JP")}`}function d(a){return("string"==typeof a?new Date(a):a).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}function e(a){return("string"==typeof a?new Date(a):a).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function f(a){let b="string"==typeof a?new Date(a):a,c=Math.floor((new Date().getTime()-b.getTime())/1e3),e=Math.floor(c/60),f=Math.floor(e/60),g=Math.floor(f/24);return c<60?"たった今":e<60?`${e}分前`:f<24?`${f}時間前`:g<7?`${g}日前`:d(b)}a.s(["formatCoins",()=>b,"formatDate",()=>d,"formatDateTime",()=>e,"formatPrice",()=>c,"formatRelativeTime",()=>f])},51973,a=>{"use strict";var b=a.i(87924),c=a.i(18239);function d({label:a,error:d,children:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("space-y-1",f),children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:a}),e,d&&(0,b.jsx)("p",{className:"text-xs text-red-400",children:d})]})}a.s(["default",()=>d])},14303,a=>{"use strict";var b=a.i(87924),c=a.i(48313),d=a.i(96438);function e({isOpen:a,onClose:e,onConfirm:f,title:g,message:h,confirmLabel:i="削除",loading:j=!1}){return(0,b.jsx)(c.default,{isOpen:a,onClose:e,children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-2",children:g}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:h}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(d.default,{variant:"ghost",size:"sm",onClick:e,children:"キャンセル"}),(0,b.jsx)(d.default,{variant:"danger",size:"sm",onClick:f,disabled:j,children:j?"処理中...":i})]})]})})}a.s(["default",()=>e])},37064,a=>{"use strict";a.s(["RANK_COLORS",0,{BEGINNER:"#9ca3af",BRONZE:"#cd7f32",SILVER:"#c0c0c0",GOLD:"#ffd700",PLATINUM:"#e5e4e2",DIAMOND:"#b9f2ff",VIP:"#ff6b6b"},"RANK_LABELS",0,{BEGINNER:"ビギナー",BRONZE:"ブロンズ",SILVER:"シルバー",GOLD:"ゴールド",PLATINUM:"プラチナ",DIAMOND:"ダイヤモンド",VIP:"VIP"}])},58394,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(18402),f=a.i(51973),g=a.i(96438),h=a.i(14303),i=a.i(74285),j=a.i(37064);let k=["USER","ADMIN","SUPER_ADMIN"],l="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid w-full",m="bg-gray-900/50 border border-gray-800 rounded-xl p-6 space-y-4";function n({params:a}){let{id:n}=(0,c.use)(a),o=(0,d.useRouter)(),{data:p}=(0,e.useSession)(),q=p?.user?.role==="SUPER_ADMIN",[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)("USER"),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)({open:!1,title:"",message:"",onConfirm:()=>{},confirmLabel:""});async function L(){u(!0),w("");let a=await fetch(`/api/admin/users/${n}`);if(a.ok){let b=await a.json();s(b),E(b.role)}else w("ユーザーの取得に失敗しました");u(!1)}async function M(){let a=parseInt(x,10);isNaN(a)||0===a||(C(!0),(await fetch(`/api/admin/users/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({coinAdjust:{amount:a,reason:z}})})).ok&&(y(""),A(""),await L()),C(!1))}async function N(){D===r?.role||(G(!0),(await fetch(`/api/admin/users/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:D})})).ok&&await L(),G(!1))}async function O(){if(!r)return;let a=!r.isActive;K({open:!0,title:a?"アカウント有効化":"アカウント無効化",message:a?"このアカウントを有効化しますか？":"このアカウントを無効化しますか？ユーザーはログインできなくなります。",confirmLabel:a?"有効化":"無効化",onConfirm:async()=>{I(!0),K(a=>({...a,open:!1})),(await fetch(`/api/admin/users/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:a})})).ok&&await L(),I(!1)}})}return((0,c.useEffect)(()=>{L()},[n]),t)?(0,b.jsx)("div",{className:"flex items-center justify-center py-20 text-gray-500",children:"読み込み中..."}):v||!r?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-red-400",children:v||"ユーザーが見つかりません"}),(0,b.jsx)(g.default,{variant:"ghost",size:"sm",onClick:()=>o.push("/admin/users"),children:"戻る"})]}):(0,b.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,b.jsx)("button",{onClick:()=>o.push("/admin/users"),className:"text-sm text-gray-400 hover:text-white transition-colors",children:"← ユーザー一覧に戻る"}),(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"ユーザー情報"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"名前"}),(0,b.jsx)("span",{children:r.name||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"メール"}),(0,b.jsx)("span",{children:r.email||"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"ロール"}),(0,b.jsx)("span",{className:"SUPER_ADMIN"===r.role?"text-red-400 font-bold":"ADMIN"===r.role?"text-yellow-400 font-bold":"",children:r.role})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"ランク"}),(0,b.jsx)("span",{className:"font-bold",style:{color:j.RANK_COLORS[r.rank]},children:j.RANK_LABELS[r.rank]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"コイン残高"}),(0,b.jsx)("span",{children:(0,i.formatCoins)(r.coins)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"累計消費"}),(0,b.jsx)("span",{children:(0,i.formatCoins)(r.totalSpent)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"登録日"}),(0,b.jsx)("span",{children:(0,i.formatDate)(r.createdAt)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"ガチャ回数"}),(0,b.jsx)("span",{children:(0,i.formatCoins)(r._count.draws)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500 block",children:"状態"}),(0,b.jsx)("span",{className:r.isActive?"text-green-400":"text-red-400",children:r.isActive?"有効":"無効"})]})]})]}),(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"コイン調整"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(f.default,{label:"調整額",className:"flex-1",children:(0,b.jsx)("input",{type:"number",value:x,onChange:a=>y(a.target.value),placeholder:"例: 1000 / -500",className:l})}),(0,b.jsx)(f.default,{label:"理由",className:"flex-[2]",children:(0,b.jsx)("input",{type:"text",value:z,onChange:a=>A(a.target.value),placeholder:"管理者による調整",className:l})})]}),(0,b.jsx)(g.default,{variant:"gold",size:"sm",onClick:M,disabled:B||!x||0===parseInt(x,10),children:B?"処理中...":"コイン調整を実行"})]}),q&&(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"ロール変更"}),(0,b.jsxs)("div",{className:"flex items-end gap-3",children:[(0,b.jsx)(f.default,{label:"ロール",className:"w-48",children:(0,b.jsx)("select",{value:D,onChange:a=>E(a.target.value),className:l,children:k.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})}),(0,b.jsx)(g.default,{variant:"outline",size:"sm",onClick:N,disabled:F||D===r.role,children:F?"処理中...":"変更"})]})]}),(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"アカウント状態"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-400",children:["現在の状態:"," ",(0,b.jsx)("span",{className:r.isActive?"text-green-400 font-bold":"text-red-400 font-bold",children:r.isActive?"有効":"無効"})]}),(0,b.jsx)(g.default,{variant:r.isActive?"danger":"gold",size:"sm",onClick:O,disabled:H,children:H?"処理中...":r.isActive?"アカウントを無効化":"アカウントを有効化"})]})]}),(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"最近のガチャ"}),0===r.draws.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"ガチャ履歴がありません"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-800 text-left text-gray-400",children:[(0,b.jsx)("th",{className:"px-3 py-2",children:"景品"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"パック"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"コイン"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"日時"})]})}),(0,b.jsx)("tbody",{children:r.draws.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-800/50 hover:bg-gray-900/50",children:[(0,b.jsxs)("td",{className:"px-3 py-2",children:[(0,b.jsx)("span",{className:"text-gray-300",children:a.prize.name}),(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:a.prize.rarity})]}),(0,b.jsx)("td",{className:"px-3 py-2 text-gray-400",children:a.pack.title}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.isTrial?(0,b.jsx)("span",{className:"text-gray-500",children:"お試し"}):(0,i.formatCoins)(a.coinsCost)}),(0,b.jsx)("td",{className:"px-3 py-2 text-gray-500",children:(0,i.formatDateTime)(a.createdAt)})]},a.id))})]})})]}),(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("h2",{className:"text-lg font-bold",children:"最近の取引"}),0===r.coinTransactions.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"取引履歴がありません"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-800 text-left text-gray-400",children:[(0,b.jsx)("th",{className:"px-3 py-2",children:"種別"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"金額"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"残高"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"説明"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"日時"})]})}),(0,b.jsx)("tbody",{children:r.coinTransactions.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-800/50 hover:bg-gray-900/50",children:[(0,b.jsx)("td",{className:"px-3 py-2",children:(0,b.jsx)("span",{className:"text-xs font-medium text-gray-400 bg-gray-800 px-2 py-0.5 rounded",children:a.type})}),(0,b.jsxs)("td",{className:`px-3 py-2 font-medium ${a.amount>0?"text-green-400":"text-red-400"}`,children:[a.amount>0?"+":"",(0,i.formatCoins)(a.amount)]}),(0,b.jsx)("td",{className:"px-3 py-2",children:(0,i.formatCoins)(a.balance)}),(0,b.jsx)("td",{className:"px-3 py-2 text-gray-400",children:a.description}),(0,b.jsx)("td",{className:"px-3 py-2 text-gray-500",children:(0,i.formatDateTime)(a.createdAt)})]},a.id))})]})})]}),(0,b.jsx)(h.default,{isOpen:J.open,onClose:()=>K(a=>({...a,open:!1})),onConfirm:J.onConfirm,title:J.title,message:J.message,confirmLabel:J.confirmLabel,loading:H})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=src_3e1a4c0c._.js.map