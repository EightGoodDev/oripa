module.exports=[74285,a=>{"use strict";function b(a){return a.toLocaleString("ja-JP")}function c(a){return`\xa5${a.toLocaleString("ja-JP")}`}function d(a){return("string"==typeof a?new Date(a):a).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}function e(a){return("string"==typeof a?new Date(a):a).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function f(a){let b="string"==typeof a?new Date(a):a,c=Math.floor((new Date().getTime()-b.getTime())/1e3),e=Math.floor(c/60),f=Math.floor(e/60),g=Math.floor(f/24);return c<60?"たった今":e<60?`${e}分前`:f<24?`${f}時間前`:g<7?`${g}日前`:d(b)}a.s(["formatCoins",()=>b,"formatDate",()=>d,"formatDateTime",()=>e,"formatPrice",()=>c,"formatRelativeTime",()=>f])},51973,a=>{"use strict";var b=a.i(87924),c=a.i(18239);function d({label:a,error:d,children:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("space-y-1",f),children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:a}),e,d&&(0,b.jsx)("p",{className:"text-xs text-red-400",children:d})]})}a.s(["default",()=>d])},14303,a=>{"use strict";var b=a.i(87924),c=a.i(48313),d=a.i(96438);function e({isOpen:a,onClose:e,onConfirm:f,title:g,message:h,confirmLabel:i="削除",loading:j=!1}){return(0,b.jsx)(c.default,{isOpen:a,onClose:e,children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-2",children:g}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:h}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(d.default,{variant:"ghost",size:"sm",onClick:e,children:"キャンセル"}),(0,b.jsx)(d.default,{variant:"danger",size:"sm",onClick:f,disabled:j,children:j?"処理中...":i})]})]})})}a.s(["default",()=>e])},28697,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18239),e=a.i(96438);function f({columns:a,data:f,pageSize:g=20,onRowClick:h,keyField:i="id"}){let[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),p=l?[...f].sort((a,b)=>{let c=a[l],d=b[l];if(null==c||null==d)return 0;let e=c<d?-1:+(c>d);return n?e:-e}):f,q=Math.max(1,Math.ceil(p.length/g)),r=p.slice(j*g,(j+1)*g);return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"border-b border-gray-800 text-left",children:a.map(a=>(0,b.jsxs)("th",{className:(0,d.cn)("px-4 py-3 text-gray-400 font-medium",a.sortable&&"cursor-pointer select-none hover:text-white",a.className),onClick:a.sortable?()=>{var b;l===(b=a.key)?o(!n):(m(b),o(!0)),k(0)}:void 0,children:[a.label,a.sortable&&l===a.key&&(0,b.jsx)("span",{className:"ml-1",children:n?"↑":"↓"})]},a.key))})}),(0,b.jsx)("tbody",{children:0===r.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:a.length,className:"px-4 py-8 text-center text-gray-500",children:"データがありません"})}):r.map(c=>(0,b.jsx)("tr",{className:(0,d.cn)("border-b border-gray-800/50 hover:bg-gray-900/50 transition-colors",h&&"cursor-pointer"),onClick:h?()=>h(c):void 0,children:a.map(a=>(0,b.jsx)("td",{className:(0,d.cn)("px-4 py-3",a.className),children:a.render?a.render(c):String(c[a.key]??"")},a.key))},String(c[i])))})]})}),q>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[f.length,"件中 ",j*g+1,"-",Math.min((j+1)*g,f.length),"件"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.default,{variant:"ghost",size:"sm",disabled:0===j,onClick:()=>k(j-1),children:"前へ"}),(0,b.jsx)(e.default,{variant:"ghost",size:"sm",disabled:j>=q-1,onClick:()=>k(j+1),children:"次へ"})]})]})]})}a.s(["default",()=>f])},39761,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(95245),e=a.i(59501),f=a.i(56757),g=a.i(28697),h=a.i(51973),i=a.i(14303),j=a.i(48313),k=a.i(96438),l=a.i(74285);let m=f.z.object({coins:f.z.coerce.number().int().min(1,"1以上を入力"),price:f.z.coerce.number().int().min(1,"1以上を入力"),bonus:f.z.coerce.number().int().min(0).default(0),isPopular:f.z.boolean().default(!1),firstTimeOnly:f.z.boolean().default(!1),isActive:f.z.boolean().default(!0),sortOrder:f.z.coerce.number().int().default(0)});function n(){let[a,f]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),{register:z,handleSubmit:A,reset:B,formState:{errors:C}}=(0,d.useForm)({resolver:(0,e.zodResolver)(m),defaultValues:{coins:0,price:0,bonus:0,isPopular:!1,firstTimeOnly:!1,isActive:!0,sortOrder:0}}),D=(0,c.useCallback)(async()=>{o(!0);try{let a=await fetch("/api/admin/plans");if(a.ok){let b=await a.json();f(b)}}finally{o(!1)}},[]);function E(){q(!1),s(null)}async function F(a){y(!0);try{let b=r?`/api/admin/plans/${r.id}`:"/api/admin/plans",c=r?"PUT":"POST";(await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(E(),await D())}finally{y(!1)}}async function G(){if(t){w(!0);try{(await fetch(`/api/admin/plans/${t.id}`,{method:"DELETE"})).ok&&(u(null),await D())}finally{w(!1)}}}(0,c.useEffect)(()=>{D()},[D]);let H=[{key:"coins",label:"コイン数",sortable:!0,render:a=>(0,l.formatCoins)(a.coins)},{key:"price",label:"価格",sortable:!0,render:a=>(0,l.formatPrice)(a.price)},{key:"bonus",label:"ボーナス",render:a=>a.bonus>0?(0,b.jsxs)("span",{className:"text-gold-mid",children:["+",(0,l.formatCoins)(a.bonus)]}):(0,b.jsx)("span",{className:"text-gray-500",children:"—"})},{key:"isPopular",label:"人気",render:a=>a.isPopular?(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-900/50 text-green-400 border border-green-800",children:"人気"}):(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-500 border border-gray-700",children:"—"})},{key:"firstTimeOnly",label:"初回限定",render:a=>a.firstTimeOnly?(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-900/50 text-yellow-400 border border-yellow-800",children:"初回限定"}):(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-gray-500 border border-gray-700",children:"—"})},{key:"isActive",label:"有効",render:a=>a.isActive?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"有効"]}):(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs text-gray-500",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"無効"]})},{key:"sortOrder",label:"表示順",sortable:!0},{key:"actions",label:"操作",render:a=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(k.default,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),s(a),B({coins:a.coins,price:a.price,bonus:a.bonus,isPopular:a.isPopular,firstTimeOnly:a.firstTimeOnly,isActive:a.isActive,sortOrder:a.sortOrder}),q(!0)},children:"編集"}),(0,b.jsx)(k.default,{variant:"danger",size:"sm",onClick:b=>{b.stopPropagation(),u(a)},children:"削除"})]})}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"チャージプラン管理"}),(0,b.jsx)(k.default,{variant:"gold",size:"sm",onClick:function(){s(null),B({coins:0,price:0,bonus:0,isPopular:!1,firstTimeOnly:!1,isActive:!0,sortOrder:0}),q(!0)},children:"新規追加"})]}),(0,b.jsx)("div",{className:"bg-gray-900/50 border border-gray-800 rounded-xl overflow-hidden",children:n?(0,b.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:"読み込み中..."}):(0,b.jsx)(g.default,{columns:H,data:a})}),(0,b.jsx)(j.default,{isOpen:p,onClose:E,className:"max-w-md",children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:r?"プラン編集":"新規プラン作成"}),(0,b.jsxs)("form",{onSubmit:A(F),className:"space-y-4",children:[(0,b.jsx)(h.default,{label:"コイン数",error:C.coins?.message,children:(0,b.jsx)("input",{type:"number",...z("coins"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,b.jsx)(h.default,{label:"価格 (円)",error:C.price?.message,children:(0,b.jsx)("input",{type:"number",...z("price"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,b.jsx)(h.default,{label:"ボーナスコイン",error:C.bonus?.message,children:(0,b.jsx)("input",{type:"number",...z("bonus"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,b.jsx)(h.default,{label:"表示順",error:C.sortOrder?.message,children:(0,b.jsx)("input",{type:"number",...z("sortOrder"),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-gold-mid"})}),(0,b.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,b.jsx)("input",{type:"checkbox",...z("isPopular"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"人気プランとして表示"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,b.jsx)("input",{type:"checkbox",...z("firstTimeOnly"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"初回限定プラン"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,b.jsx)("input",{type:"checkbox",...z("isActive"),className:"rounded border-gray-600 bg-gray-800 text-gold-mid focus:ring-gold-mid"}),"有効"]})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,b.jsx)(k.default,{type:"button",variant:"ghost",size:"sm",onClick:E,children:"キャンセル"}),(0,b.jsx)(k.default,{type:"submit",variant:"gold",size:"sm",disabled:x,children:x?"保存中...":r?"更新":"作成"})]})]})]})}),(0,b.jsx)(i.default,{isOpen:!!t,onClose:()=>u(null),onConfirm:G,title:"プランを削除",message:"このチャージプランを削除しますか？注文履歴がある場合は無効化されます。",confirmLabel:"削除",loading:v})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=src_5cbbbc76._.js.map