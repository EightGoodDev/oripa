module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},96438,a=>{"use strict";var b=a.i(87924),c=a.i(18239);let d={gold:"bg-gradient-to-r from-gold-start to-gold-end text-gray-900 font-bold shadow-lg hover:brightness-110",outline:"border border-gray-600 text-gray-300 hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700",ghost:"text-gray-400 hover:text-white hover:bg-gray-800"},e={sm:"h-9 px-3 text-sm rounded-lg",md:"h-12 px-5 text-base rounded-xl",lg:"h-14 px-6 text-lg rounded-xl"};function f({variant:a="gold",size:f="md",className:g,children:h,...i}){return(0,b.jsx)("button",{className:(0,c.cn)("inline-flex items-center justify-center transition-all active:scale-95 disabled:opacity-50 disabled:pointer-events-none",d[a],e[f],g),...i,children:h})}a.s(["default",()=>f])},35785,a=>{"use strict";a.s(["CATEGORY_LABELS",0,{all:"ã™ã¹ã¦",sneaker:"ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼",card:"ãƒˆãƒ¬ã‚«",figure:"ãƒ•ã‚£ã‚®ãƒ¥ã‚¢",game:"ã‚²ãƒ¼ãƒ ",other:"ãã®ä»–"},"RARITY_CONFIG",0,{N:{label:"N",color:"#9ca3af",bg:"#374151",glow:""},R:{label:"R",color:"#60a5fa",bg:"#1e3a5f",glow:""},SR:{label:"SR",color:"#a78bfa",bg:"#3b1f7a",glow:"0 0 20px rgba(167,139,250,0.5)"},SSR:{label:"SSR",color:"#fbbf24",bg:"#78350f",glow:"0 0 30px rgba(251,191,36,0.6)"},UR:{label:"UR",color:"#f472b6",bg:"#831843",glow:"0 0 40px rgba(244,114,182,0.7)"}}])},55486,a=>{"use strict";var b=a.i(87924),c=a.i(35785);function d({rarity:a}){let d=c.RARITY_CONFIG[a];return(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold",style:{color:d.color,backgroundColor:d.bg},children:d.label})}a.s(["default",()=>d])},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},76995,a=>{"use strict";var b=a.i(87924);function c({remaining:a,total:c,size:d="sm"}){let e=c>0?a/c*100:0,f=e<20;return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`w-full bg-gray-800 rounded-full overflow-hidden ${"md"===d?"h-3":"h-2"}`,children:(0,b.jsx)("div",{className:`h-full rounded-full transition-all ${f?"bg-red-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${e}%`}})}),(0,b.jsxs)("p",{className:`text-gray-400 mt-1 ${"md"===d?"text-sm":"text-xs"}`,children:["æ®‹ã‚Š"," ",(0,b.jsx)("span",{className:`font-bold ${f?"text-red-400":"text-white"}`,children:a}),(0,b.jsxs)("span",{className:"text-gray-600",children:[" / ",c,"å£"]})]})]})}a.s(["default",()=>c])},84757,a=>{"use strict";var b=a.i(87924);function c({tabs:a,active:c,onChange:d}){return(0,b.jsx)("div",{className:"flex gap-1 overflow-x-auto no-scrollbar px-4 py-2",children:a.map(a=>(0,b.jsx)("button",{onClick:()=>d(a.value),className:`shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors ${c===a.value?"bg-yellow-400 text-gray-900":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:a.label},a.value))})}a.s(["default",()=>c])},76231,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(18402),f=a.i(71987),g=a.i(76995),h=a.i(55486),i=a.i(84757),j=a.i(74285);a.i(54799);let k=[{value:"all",label:"ã™ã¹ã¦"},{value:"UR",label:"UR"},{value:"SSR",label:"SSR"},{value:"SR",label:"SR"},{value:"R",label:"R"},{value:"N",label:"N"}];function l({prizes:a,totalWeight:d}){let[e,g]=(0,c.useState)("all"),l="all"===e?a:a.filter(a=>a.rarity===e);return(0,b.jsxs)("div",{children:[(0,b.jsx)(i.default,{tabs:k,active:e,onChange:g}),(0,b.jsx)("div",{className:"space-y-2 px-4 mt-2",children:l.map(a=>{var c;let e;return(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-gray-900 rounded-lg p-3 border border-gray-800",children:[(0,b.jsx)("div",{className:"relative w-14 h-14 shrink-0 rounded bg-gray-800 overflow-hidden",children:(0,b.jsx)(f.default,{src:a.image,alt:a.name,fill:!0,className:"object-cover",sizes:"56px"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.default,{rarity:a.rarity}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:(c=a.weight,(e=100*(d<=0?0:c/d))<.01?"< 0.01%":`${e.toFixed(2)}%`)})]}),(0,b.jsx)("p",{className:"text-sm text-white font-medium truncate mt-0.5",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["å‚è€ƒä¾¡æ ¼: ",(0,j.formatPrice)(a.marketPrice)]})]})]},a.id)})})]})}var m=a.i(48313),n=a.i(46271),o=a.i(35785);function p({prize:a,onComplete:d,index:e=0}){let[g,i]=(0,c.useState)(!1),k=o.RARITY_CONFIG[a.rarity],l="SSR"===a.rarity||"UR"===a.rarity;return(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",onClick:()=>{g||(i(!0),setTimeout(d,1200))},children:[g&&l&&(0,b.jsx)(n.motion.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,.8,.4],scale:[0,1.5,1.2]},transition:{duration:.8},className:"absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${k.color}40 0%, transparent 70%)`}}),(0,b.jsx)("div",{className:"relative w-56 h-72",style:{perspective:"1000px"},children:(0,b.jsxs)(n.motion.div,{initial:{rotateY:0},animate:g?{rotateY:180}:{},transition:{duration:.6,delay:.1*e},className:"relative w-full h-full",style:{transformStyle:"preserve-3d"},children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-xl border-2 border-gray-600 flex items-center justify-center",style:{backfaceVisibility:"hidden",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)"},children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-4xl mb-2",children:"â“"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"ã‚¿ãƒƒãƒ—ã—ã¦é–‹å°"})]})}),(0,b.jsxs)("div",{className:"absolute inset-0 rounded-xl border-2 overflow-hidden flex flex-col items-center justify-center gap-3 p-4",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)",borderColor:k.color,background:`linear-gradient(135deg, ${k.bg} 0%, #0a0a0a 100%)`,boxShadow:k.glow},children:[(0,b.jsx)(h.default,{rarity:a.rarity}),(0,b.jsx)("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden bg-gray-800",children:(0,b.jsx)(f.default,{src:a.image,alt:a.name,fill:!0,className:"object-cover",sizes:"128px"})}),(0,b.jsx)("p",{className:"text-white text-sm font-bold text-center leading-tight",children:a.name}),(0,b.jsx)("p",{className:"text-yellow-400 text-xs",children:(0,j.formatPrice)(a.marketPrice)})]})]})})]})}var q=a.i(96438);function r({results:a,isTrial:c,onClose:d}){return(0,b.jsxs)("div",{className:"bg-gray-900 rounded-2xl p-5 max-h-[80vh] overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-white text-center mb-1",children:c?"ãŠè©¦ã—çµæœ":"æŠ½é¸çµæœ"}),c&&(0,b.jsx)("p",{className:"text-xs text-center text-gray-400 mb-4",children:"â€» ãŠè©¦ã—ã®ãŸã‚ã‚¢ã‚¤ãƒ†ãƒ ã¯ç²å¾—ã•ã‚Œã¾ã›ã‚“"}),(0,b.jsx)("div",{className:`grid gap-3 mb-5 ${a.length>1?"grid-cols-2":"grid-cols-1 max-w-[200px] mx-auto"}`,children:a.map(a=>{let c=o.RARITY_CONFIG[a.prize.rarity];return(0,b.jsxs)("div",{className:"rounded-xl border p-3 flex flex-col items-center gap-2",style:{borderColor:c.color+"60",background:c.bg+"40"},children:[(0,b.jsx)(h.default,{rarity:a.prize.rarity}),(0,b.jsx)("div",{className:"relative w-20 h-20 rounded bg-gray-800 overflow-hidden",children:(0,b.jsx)(f.default,{src:a.prize.image,alt:a.prize.name,fill:!0,className:"object-cover",sizes:"80px"})}),(0,b.jsx)("p",{className:"text-white text-xs font-medium text-center leading-tight",children:a.prize.name})]},a.id)})}),(0,b.jsx)(q.default,{variant:"gold",size:"md",className:"w-full",onClick:d,children:"OK"})]})}function s({isOpen:a,onClose:d,results:e,isTrial:f}){let[g,h]=(0,c.useState)("reveal"),[i,j]=(0,c.useState)(0),k=(0,c.useCallback)(()=>{j(a=>{let b=a+1;return b>=e.length&&setTimeout(()=>h("result"),400),b})},[e.length]),l=()=>{h("reveal"),j(0),d()};return 0===e.length?null:(0,b.jsxs)(m.default,{isOpen:a,onClose:l,children:["reveal"===g&&1===e.length&&(0,b.jsx)(p,{prize:e[0].prize,onComplete:k}),"reveal"===g&&e.length>1&&(0,b.jsxs)("div",{className:"bg-gray-900 rounded-2xl p-5",children:[(0,b.jsxs)("p",{className:"text-center text-gray-400 text-sm mb-4",children:["ã‚¿ãƒƒãƒ—ã—ã¦é–‹å° (",i,"/",e.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.map((a,c)=>(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"scale-[0.55] origin-top",children:(0,b.jsx)(p,{prize:a.prize,onComplete:k,index:c})})},a.id))})]}),"result"===g&&(0,b.jsx)(r,{results:e,isTrial:f,onClose:l})]})}function t({pack:a}){let i=(0,d.useRouter)(),{data:k}=(0,e.useSession)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)([]),[r,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(a.remainingStock),y=(0,c.useCallback)(async(b,c)=>{if(!c&&!k?.user)return void i.push("/login");v(!0);try{let d=await fetch("/api/gacha/draw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packId:a.id,count:b,isTrial:c})}),e=await d.json();if("error"in e)return void alert(e.error);x(e.remainingStock),t(c),p(e.results),n(!0)}catch{alert("é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ")}finally{v(!1)}},[a.id,k,i]),z=w<=0;return(0,b.jsxs)("div",{className:"pb-6",children:[(0,b.jsxs)("div",{className:"relative aspect-[4/3] bg-gray-800",children:[(0,b.jsx)(f.default,{src:a.image,alt:a.title,fill:!0,className:"object-cover",sizes:"100vw",priority:!0}),a.featured&&(0,b.jsx)("span",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded",children:"æ³¨ç›®"})]}),(0,b.jsxs)("div",{className:"px-4 pt-4",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-white",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,b.jsxs)("p",{className:"text-yellow-400 font-bold text-lg",children:["ğŸª™ ",(0,j.formatCoins)(a.pricePerDraw)," / å›"]}),a.limitPerUser&&(0,b.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-800 px-2 py-1 rounded",children:["1äºº",a.limitPerUser,"å›ã¾ã§"]})]}),a.endsAt&&(0,b.jsxs)("p",{className:"text-xs text-red-400 mt-2",children:["çµ‚äº†: ",(0,j.formatDate)(a.endsAt)]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(g.default,{remaining:w,total:a.totalStock,size:"md"})}),a.lastOnePrize&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-purple-900/40 border border-purple-700 rounded-xl",children:[(0,b.jsx)("p",{className:"text-xs text-purple-300 font-bold mb-2",children:"ãƒ©ã‚¹ãƒˆãƒ¯ãƒ³è³"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative w-12 h-12 rounded bg-gray-800 overflow-hidden",children:(0,b.jsx)(f.default,{src:a.lastOnePrize.image,alt:a.lastOnePrize.name,fill:!0,className:"object-cover",sizes:"48px"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.default,{rarity:a.lastOnePrize.rarity}),(0,b.jsx)("p",{className:"text-sm text-white mt-0.5",children:a.lastOnePrize.name})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 mt-6",children:[(0,b.jsx)(q.default,{variant:"gold",size:"lg",className:"w-full",disabled:z||u,onClick:()=>y(1,!1),children:z?"å®Œå£²":`1å›å¼•ãï¼ˆ${(0,j.formatCoins)(a.pricePerDraw)}ã‚³ã‚¤ãƒ³ï¼‰`}),w>=10&&(0,b.jsxs)(q.default,{variant:"gold",size:"lg",className:"w-full",disabled:u,onClick:()=>y(10,!1),children:["10å›å¼•ãï¼ˆ",(0,j.formatCoins)(10*a.pricePerDraw),"ã‚³ã‚¤ãƒ³ï¼‰"]}),(0,b.jsx)(q.default,{variant:"outline",size:"md",className:"w-full",disabled:u,onClick:()=>y(1,!0),children:"ãŠè©¦ã—å¼•ãï¼ˆç„¡æ–™ï¼‰"})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-white px-4 mb-3",children:"æ™¯å“ä¸€è¦§"}),(0,b.jsx)(l,{prizes:a.prizes,totalWeight:a.totalWeight})]}),(0,b.jsx)("div",{className:"mt-6 px-4",children:(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"â€» è¡¨ç¤ºç¢ºç‡ã¯å„æ™¯å“ã®å½“é¸ç¢ºç‡ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚åœ¨åº«çŠ¶æ³ã«ã‚ˆã‚Šå®Ÿéš›ã®ç¢ºç‡ã¯å¤‰å‹•ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚"})}),(0,b.jsx)(s,{isOpen:m,onClose:()=>{n(!1),i.refresh()},results:o,isTrial:r})]})}a.s(["default",()=>t],76231)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0a66212c._.js.map